{{ define "body" }}
    <body class="disable-hor-scroll" style="background: transparent;">
{{ end }}

{{ define "main" }}
    <div class="video-container" style="opacity: 1; background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%);">
        <video id="bg-video" autoplay muted loop playsinline preload="auto" poster="">
            <source src="{{ "videos/background.mp4" | relURL }}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

    <div class="content">
        <div class="homepage-bg">
            <h1>{{ .Site.Title }}</h1>

            {{ partial "subtitle.html" . }}

            <div class="homepage-buttons">
                <p>
                    <span><a href="{{ "resume" | absLangURL }}"><button>About me</button></a></span> 
                    <span><a href="{{ "projects" | absLangURL }}"><button>My projects</button></a></span>
                </p>
            </div>
        </div>
    </div>

    <script>
        (function() {
            function isMobileDisplay() {
                const mQuery = getComputedStyle(document.body).getPropertyValue("--phoneWidth");
                return window.matchMedia(mQuery).matches;
            }

            if (!isMobileDisplay()) {
                document.body.style.background = "transparent";
            }
            
            const videoContainer = document.querySelector(".video-container");
            const video = document.getElementById("bg-video");
            
            if (!video || !videoContainer) {
                console.error("Video elements not found");
                return;
            }

            // Forza sempre la visibilit√† del video
            video.style.opacity = "1";
            videoContainer.style.opacity = "1";
            // Prova a far partire il video appena possibile
            video.addEventListener("canplay", function() {
                video.play();
            });
        })();
    </script>
{{ end }}
